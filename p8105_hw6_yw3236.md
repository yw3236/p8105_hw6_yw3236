p8105\_hw6\_yw3236
================
Yishan Wang
2018-11-19

Problem 1
=========

``` r
homicides_data = read.csv("https://raw.githubusercontent.com/washingtonpost/data-homicides/master/homicide-data.csv")
```

``` r
new_homicides_data = homicides_data %>%
  mutate(city_state = paste(city, state, sep = ", ")) %>%
  mutate(resolved = as.numeric(disposition == "Closed by arrest")) %>% #factor???
  filter(city_state != "Dallas, TX" & city_state != "Phoenix, AZ" & city_state != "Kansas City, MO") %>%
  filter(city_state != "Tulsa, AL") %>%
  mutate(victim_race = ifelse(victim_race == "White", "white", "non-white"),
         victim_race = fct_relevel(victim_race, "white"),
         victim_age = as.numeric(victim_age))
```

View(new\_homicides\_data)

``` r
fit_logistic = new_homicides_data %>%
  filter(city_state == "Baltimore, MD") %>%
  glm(resolved ~ victim_age + victim_race + victim_sex, data = ., family = binomial()) 
```

``` r
fit_logistic %>% 
  broom::tidy() %>% 
  mutate(OR = exp(estimate),
         CI_lower = exp(estimate - qnorm(0.975) * std.error),
         CI_upper = exp(estimate + qnorm(0.975) * std.error)) %>%
  select(term, OR, CI_lower, CI_upper, p.value) %>% 
  knitr::kable(digits = 3)
```

| term                  |     OR|  CI\_lower|  CI\_upper|  p.value|
|:----------------------|------:|----------:|----------:|--------:|
| (Intercept)           |  2.850|      1.828|      4.443|    0.000|
| victim\_age           |  0.996|      0.990|      1.002|    0.217|
| victim\_racenon-white |  0.453|      0.322|      0.637|    0.000|
| victim\_sexMale       |  0.413|      0.316|      0.539|    0.000|
